{"ast":null,"code":"import _objectSpread from\"C:/Users/Personal/OneDrive/Desktop/Marina/pytho/website/occupant_calculator/occupancy-calculator/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useState}from\"react\";import*as XLSX from\"xlsx\";import{saveAs}from\"file-saver\";import jsPDF from\"jspdf\";/* =========================================================\r\n   CODE SETS (starter defaults, m¬≤ per person)\r\n   Note: Values here are generic starters ‚Äî verify per your jurisdiction.\r\n   You can edit per-code factors in the UI; edits persist in localStorage.\r\n   ========================================================= */import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CODE_SETS={IBC_2024:{label:\"IBC 2024 (Table 1004.5)\",factors:{Retail:2.8,Restaurant:1.4,Administrative:9.3,Mechanical:28}},IBC_2021:{label:\"IBC 2021\",factors:{Retail:2.8,Restaurant:1.4,Administrative:9.3,Mechanical:28}},NFPA_101_2024:{label:\"NFPA 101 (2024)\",factors:{Retail:2.8,Restaurant:1.4,Administrative:9.3,Mechanical:28}},UK_ADB_2023:{label:\"UK Approved Document B (2023)\",factors:{Retail:2.8,Restaurant:1.4,Administrative:9.3,Mechanical:28}},NCC_AU_2022:{label:\"Australia NCC (2022)\",factors:{Retail:2.8,Restaurant:1.4,Administrative:9.3,Mechanical:28}},NBC_CA_2020:{label:\"Canada NBC (2020)\",factors:{Retail:2.8,Restaurant:1.4,Administrative:9.3,Mechanical:28}},SBC_SA_2018:{label:\"Saudi SBC (2018+)\",factors:{Retail:2.8,Restaurant:1.4,Administrative:9.3,Mechanical:28}},UAE_FireCode_2018:{label:\"UAE Fire & Life Safety (2018+)\",factors:{Retail:2.8,Restaurant:1.4,Administrative:9.3,Mechanical:28}},EU_Guidance:{label:\"EU Guidance (generic)\",factors:{Retail:2.8,Restaurant:1.4,Administrative:9.3,Mechanical:28}}};// localStorage helpers (persist your edited factors per code)\nconst LS_KEY=\"occuCalc.codeOverrides.v1\";// -------------------- Helpers --------------------\nconst normalizeType=(t,available)=>{const val=(t||\"\").toString().trim();return available.includes(val)?val:available[0]||\"Retail\";};const loadFrom=(area,factorMap,type)=>{var _ref,_factorMap$type;const a=Number(area);const f=(_ref=(_factorMap$type=factorMap[type])!==null&&_factorMap$type!==void 0?_factorMap$type:factorMap[\"Retail\"])!==null&&_ref!==void 0?_ref:1;return Number.isFinite(a)&&a>0?Math.ceil(a/f):0;};// -------------------- Component --------------------\nexport default function OccuCalcTools(){// Mode + Code selection\nconst[mode,setMode]=useState(\"manual\");// \"manual\" | \"upload\"\nconst[codeId,setCodeId]=useState(\"IBC_2024\");// Per-code custom overrides (persisted)\nconst[overrides,setOverrides]=useState({});useEffect(()=>{try{const raw=localStorage.getItem(LS_KEY);if(raw)setOverrides(JSON.parse(raw));}catch(_unused){}},[]);useEffect(()=>{try{localStorage.setItem(LS_KEY,JSON.stringify(overrides));}catch(_unused2){}},[overrides]);// Active factor map for current code (defaults + overrides)\nconst baseFactors=CODE_SETS[codeId].factors;const currentFactors=useMemo(()=>_objectSpread(_objectSpread({},baseFactors),overrides[codeId]||{}),[baseFactors,overrides,codeId]);const typeList=useMemo(()=>Object.keys(currentFactors),[currentFactors]);// Manual rows (compact shape)\nconst[manualRows,setManualRows]=useState([{id:1,number:\"1\",name:\"Space 1\",area:\"\",type:typeList[0]||\"Retail\"}]);useEffect(()=>{// when switching codes, align types that no longer exist\nsetManualRows(prev=>prev.map(r=>_objectSpread(_objectSpread({},r),{},{type:normalizeType(r.type,typeList)})));},[typeList]);// Upload/edit rows (header-style keys)\nconst[gridRows,setGridRows]=useState([]);useEffect(()=>{// when switching codes, re-evaluate loads & types\nsetGridRows(prev=>prev.map(r=>{const t=normalizeType(r[\"Occupancy Type\"],typeList);return _objectSpread(_objectSpread({},r),{},{\"Occupancy Type\":t,\"Occupant Load\":loadFrom(r[\"Area (m¬≤)\"],currentFactors,t)});}));},[currentFactors,typeList]);// Totals (derived)\nconst{totals,grandTotal}=useMemo(()=>{const rows=mode===\"manual\"?manualRows.map(r=>({\"Room #\":r.number,\"Room Name\":r.name,\"Area (m¬≤)\":r.area,\"Occupancy Type\":r.type,\"Occupant Load\":loadFrom(r.area,currentFactors,r.type)})):gridRows;const grouped={};let sum=0;rows.forEach(r=>{const t=normalizeType(r[\"Occupancy Type\"],typeList);const l=Number(r[\"Occupant Load\"])||0;grouped[t]=(grouped[t]||0)+l;sum+=l;});return{totals:grouped,grandTotal:sum};},[mode,manualRows,gridRows,currentFactors,typeList]);// -------------------- Handlers --------------------\nconst handleModeChange=e=>setMode(e.target.value);const handleCodeChange=e=>setCodeId(e.target.value);// Manual CRUD\nconst addManualRow=()=>setManualRows(prev=>{const id=prev.length?Math.max(...prev.map(x=>x.id))+1:1;return[...prev,{id,number:String(id),name:\"Space \".concat(id),area:\"\",type:typeList[0]||\"Retail\"}];});const removeManualRow=id=>setManualRows(prev=>prev.filter(r=>r.id!==id));const changeManual=(id,key,val)=>setManualRows(prev=>prev.map(r=>r.id===id?_objectSpread(_objectSpread({},r),{},{[key]:key===\"type\"?normalizeType(val,typeList):val}):r));const clearManual=()=>setManualRows([{id:1,number:\"1\",name:\"Space 1\",area:\"\",type:typeList[0]||\"Retail\"}]);// Upload\nconst handleUpload=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!file)return;const reader=new FileReader();reader.onload=evt=>{const wb=XLSX.read(evt.target.result,{type:\"binary\"});const ws=wb.Sheets[wb.SheetNames[0]];const rows=XLSX.utils.sheet_to_json(ws,{defval:\"\"}).map((row,i)=>{var _row$OccupancyType,_ref2,_row$AreaM,_ref3,_row$Room,_ref4,_row$RoomName;const rawType=(_row$OccupancyType=row[\"Occupancy Type\"])!==null&&_row$OccupancyType!==void 0?_row$OccupancyType:row[\"Type\"];const type=normalizeType(rawType,typeList);const area=(_ref2=(_row$AreaM=row[\"Area (m¬≤)\"])!==null&&_row$AreaM!==void 0?_row$AreaM:row[\"Area\"])!==null&&_ref2!==void 0?_ref2:\"\";return{id:i+1,\"Room #\":String((_ref3=(_row$Room=row[\"Room #\"])!==null&&_row$Room!==void 0?_row$Room:row[\"Room Number\"])!==null&&_ref3!==void 0?_ref3:i+1),\"Room Name\":String((_ref4=(_row$RoomName=row[\"Room Name\"])!==null&&_row$RoomName!==void 0?_row$RoomName:row[\"Name\"])!==null&&_ref4!==void 0?_ref4:\"Space \".concat(i+1)),\"Area (m¬≤)\":area,\"Occupancy Type\":type,\"Occupant Load\":loadFrom(area,currentFactors,type)};});setGridRows(rows);};reader.readAsBinaryString(file);e.target.value=null;};const changeGrid=(id,key,val)=>setGridRows(prev=>prev.map(r=>{if(r.id!==id)return r;const next=_objectSpread(_objectSpread({},r),{},{[key]:val});const t=key===\"Occupancy Type\"?normalizeType(val,typeList):normalizeType(next[\"Occupancy Type\"],typeList);next[\"Occupancy Type\"]=t;next[\"Occupant Load\"]=loadFrom(next[\"Area (m¬≤)\"],currentFactors,t);return next;}));const addGridRow=()=>setGridRows(prev=>{const id=prev.length?Math.max(...prev.map(x=>x.id))+1:1;return[...prev,{id,\"Room #\":String(id),\"Room Name\":\"Space \".concat(id),\"Area (m¬≤)\":\"\",\"Occupancy Type\":typeList[0]||\"Retail\",\"Occupant Load\":0}];});const removeGridRow=id=>setGridRows(prev=>prev.filter(r=>r.id!==id));const clearGrid=()=>setGridRows([]);// Exports\nconst exportExcel=()=>{const rows=mode===\"manual\"?manualRows.map(r=>({\"Room #\":r.number,\"Room Name\":r.name,\"Area (m¬≤)\":r.area,\"Occupancy Type\":r.type,\"Occupant Load\":loadFrom(r.area,currentFactors,r.type)})):gridRows;const ws=XLSX.utils.json_to_sheet(rows,{header:[\"Room #\",\"Room Name\",\"Area (m¬≤)\",\"Occupancy Type\",\"Occupant Load\"]});const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,ws,\"Occupancy\");const buf=XLSX.write(wb,{type:\"array\",bookType:\"xlsx\"});saveAs(new Blob([buf],{type:\"application/octet-stream\"}),\"occupancy_data.xlsx\");};const exportPDFSummary=()=>{const doc=new jsPDF({unit:\"pt\",format:\"a4\"});let y=64;doc.setFontSize(18);doc.text(\"Occupancy Summary \\u2013 \".concat(CODE_SETS[codeId].label),40,y);y+=24;doc.setFontSize(12);Object.entries(totals).forEach(_ref5=>{let[type,count]=_ref5;doc.text(\"\".concat(type,\": \").concat(count,\" occupants\"),40,y);y+=16;});y+=10;doc.setFontSize(14);doc.text(\"Grand Total: \".concat(grandTotal,\" occupants\"),40,y);doc.save(\"occupancy_summary.pdf\");};const exportPDFDetailed=()=>{const rows=mode===\"manual\"?manualRows.map(r=>({\"Room #\":r.number,\"Room Name\":r.name,\"Area (m¬≤)\":r.area,\"Occupancy Type\":r.type,\"Occupant Load\":loadFrom(r.area,currentFactors,r.type)})):gridRows;const doc=new jsPDF({unit:\"pt\",format:\"a4\"});let y=64;doc.setFontSize(18);doc.text(\"Occupancy Detailed Report \\u2013 \".concat(CODE_SETS[codeId].label),40,y);y+=24;doc.setFontSize(10);doc.text(\"Room #\",40,y);doc.text(\"Room Name\",110,y);doc.text(\"Area (m¬≤)\",280,y);doc.text(\"Type\",360,y);doc.text(\"Load\",460,y);y+=12;doc.line(40,y,520,y);y+=12;rows.forEach(r=>{if(y>760){doc.addPage();y=64;}doc.text(String(r[\"Room #\"]),40,y);doc.text(String(r[\"Room Name\"]),110,y);doc.text(String(r[\"Area (m¬≤)\"]),280,y);doc.text(String(r[\"Occupancy Type\"]),360,y);doc.text(String(r[\"Occupant Load\"]),460,y);y+=14;});y+=12;doc.setFontSize(12);doc.text(\"Grand Total: \".concat(grandTotal,\" occupants\"),40,y);doc.save(\"occupancy_detailed.pdf\");};// Factor editor UI state\nconst[showEditor,setShowEditor]=useState(false);const[newTypeName,setNewTypeName]=useState(\"\");const setFactorFor=(type,value)=>{const v=Number(value);if(!Number.isFinite(v)||v<=0)return;setOverrides(prev=>_objectSpread(_objectSpread({},prev),{},{[codeId]:_objectSpread(_objectSpread({},prev[codeId]||{}),{},{[type]:v})}));};const resetCodeToDefaults=()=>setOverrides(prev=>{const next=_objectSpread({},prev);delete next[codeId];return next;});const addNewType=()=>{const name=newTypeName.trim();if(!name||typeList.includes(name))return;setOverrides(prev=>_objectSpread(_objectSpread({},prev),{},{[codeId]:_objectSpread(_objectSpread({},prev[codeId]||{}),{},{[name]:10})// default 10 m¬≤/person; user can change\n}));setNewTypeName(\"\");};const deleteType=type=>{// remove only if it's an override (not a base factor)\nif(Object.prototype.hasOwnProperty.call(baseFactors,type))return;setOverrides(prev=>{const curr=_objectSpread({},prev[codeId]||{});delete curr[type];return _objectSpread(_objectSpread({},prev),{},{[codeId]:curr});});};// -------------------- UI --------------------\nreturn/*#__PURE__*/_jsxs(\"div\",{style:{fontFamily:\"Arial, sans-serif\",padding:24,maxWidth:1200,margin:\"0 auto\"},children:[/*#__PURE__*/_jsx(\"h1\",{style:{margin:0},children:\"\\uD83C\\uDFE2 OccuCalc\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#444\",marginTop:6},children:\"Calculate occupant loads (m\\xB2/person) using selectable code sets. You can edit per-code factors below.\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:12,flexWrap:\"wrap\",alignItems:\"center\",border:\"1px solid #e5e7eb\",borderRadius:10,padding:12,marginTop:12},children:[/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Mode:\"})}),/*#__PURE__*/_jsxs(\"select\",{value:mode,onChange:handleModeChange,style:{padding:\"6px 10px\",borderRadius:8},children:[/*#__PURE__*/_jsx(\"option\",{value:\"manual\",children:\"Manual entry\"}),/*#__PURE__*/_jsx(\"option\",{value:\"upload\",children:\"Upload Excel\"})]}),/*#__PURE__*/_jsx(\"label\",{style:{marginLeft:8},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Code:\"})}),/*#__PURE__*/_jsx(\"select\",{value:codeId,onChange:handleCodeChange,style:{padding:\"6px 10px\",borderRadius:8,minWidth:220},children:Object.entries(CODE_SETS).map(_ref6=>{let[id,cfg]=_ref6;return/*#__PURE__*/_jsx(\"option\",{value:id,children:cfg.label},id);})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowEditor(s=>!s),style:btn(\"ghost\"),children:showEditor?\"Hide factors\":\"Edit factors\"}),mode===\"upload\"&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".xlsx,.xls\",onChange:handleUpload,title:\"Upload Excel\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:\"auto\",display:\"flex\",gap:8},children:[/*#__PURE__*/_jsx(\"button\",{onClick:exportExcel,style:btn(),children:\"Export Excel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:exportPDFSummary,style:btn(),children:\"PDF Summary\"}),/*#__PURE__*/_jsx(\"button\",{onClick:exportPDFDetailed,style:btn(),children:\"PDF Detailed\"})]})]}),showEditor&&/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid #e5e7eb\",borderRadius:10,padding:12,marginTop:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",gap:8},children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"Factors for: \",CODE_SETS[codeId].label]}),/*#__PURE__*/_jsx(\"button\",{onClick:resetCodeToDefaults,style:btn(\"danger\"),children:\"Reset to defaults\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{overflowX:\"auto\",marginTop:10},children:/*#__PURE__*/_jsxs(\"table\",{style:table(),children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:th(260),children:\"Occupancy Type\"}),/*#__PURE__*/_jsx(\"th\",{style:th(180),children:\"Factor (m\\xB2/person)\"}),/*#__PURE__*/_jsx(\"th\",{style:th(120)})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[typeList.map(t=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:td(260),children:t}),/*#__PURE__*/_jsx(\"td\",{style:td(180),children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0.01\",step:\"0.01\",value:currentFactors[t],onChange:e=>setFactorFor(t,e.target.value),style:input(160)})}),/*#__PURE__*/_jsx(\"td\",{style:td(120),children:!Object.prototype.hasOwnProperty.call(baseFactors,t)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteType(t),style:btn(\"danger\"),children:\"Delete\"})})]},t)),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:td(260),children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Add new type (e.g., Assembly \\u2013 standing)\",value:newTypeName,onChange:e=>setNewTypeName(e.target.value),style:input(240)})}),/*#__PURE__*/_jsx(\"td\",{style:td(180),children:/*#__PURE__*/_jsx(\"em\",{style:{color:\"#666\"},children:\"Default 10 m\\xB2/person (editable after adding)\"})}),/*#__PURE__*/_jsx(\"td\",{style:td(120),children:/*#__PURE__*/_jsx(\"button\",{onClick:addNewType,style:btn(),children:\"Add type\"})})]})]})]})}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#888\",marginTop:8},children:\"These are convenience defaults. Always verify factors against the official code text adopted in your project\\u2019s jurisdiction.\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 320px\",gap:16,marginTop:16},children:[/*#__PURE__*/_jsx(\"div\",{children:mode===\"manual\"?/*#__PURE__*/_jsx(ManualTable,{rows:manualRows,types:typeList,onAdd:addManualRow,onRemove:removeManualRow,onChange:changeManual,onClear:clearManual}):/*#__PURE__*/_jsx(GridTable,{rows:gridRows,types:typeList,onAdd:addGridRow,onRemove:removeGridRow,onChange:changeGrid,onClear:clearGrid})}),/*#__PURE__*/_jsxs(\"aside\",{style:{border:\"1px solid #e5e7eb\",borderRadius:10,padding:16,height:\"fit-content\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0},children:\"Totals\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:8,color:\"#666\"},children:[\"Code: \",CODE_SETS[codeId].label]}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:\"none\",padding:0,margin:0},children:typeList.map(t=>/*#__PURE__*/_jsxs(\"li\",{style:{display:\"flex\",justifyContent:\"space-between\",padding:\"6px 0\"},children:[/*#__PURE__*/_jsx(\"span\",{children:t}),/*#__PURE__*/_jsx(\"strong\",{children:totals[t]||0})]},t))}),/*#__PURE__*/_jsx(\"hr\",{style:{margin:\"12px 0\"}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Grand Total\"}),/*#__PURE__*/_jsx(\"strong\",{children:grandTotal})]})]})]})]});}/* ===================== Sub-components ===================== */function ManualTable(_ref7){let{rows,types,onAdd,onRemove,onChange,onClear}=_ref7;return/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid #e5e7eb\",borderRadius:10,overflow:\"hidden\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,display:\"flex\",gap:8,alignItems:\"center\",background:\"#fafafa\"},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Manual Entry\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:\"auto\",display:\"flex\",gap:8},children:[/*#__PURE__*/_jsx(\"button\",{onClick:onAdd,style:btn(),children:\"Add row\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClear,style:btn(\"ghost\"),children:\"Clear\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{style:table(),children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:th(80),children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{style:th(),children:\"Room Name\"}),/*#__PURE__*/_jsx(\"th\",{style:th(120),children:\"Area (m\\xB2)\"}),/*#__PURE__*/_jsx(\"th\",{style:th(200),children:\"Occupancy Type\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[rows.map(r=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:td(80),children:/*#__PURE__*/_jsx(\"input\",{value:r.number,onChange:e=>onChange(r.id,\"number\",e.target.value),style:input(70)})}),/*#__PURE__*/_jsx(\"td\",{style:td(),children:/*#__PURE__*/_jsx(\"input\",{value:r.name,onChange:e=>onChange(r.id,\"name\",e.target.value),style:input()})}),/*#__PURE__*/_jsx(\"td\",{style:td(120),children:/*#__PURE__*/_jsx(\"input\",{value:r.area,onChange:e=>onChange(r.id,\"area\",e.target.value),style:input(100),inputMode:\"decimal\",placeholder:\"0\"})}),/*#__PURE__*/_jsx(\"td\",{style:td(200),children:/*#__PURE__*/_jsx(\"select\",{value:r.type,onChange:e=>onChange(r.id,\"type\",e.target.value),style:select(180),children:types.map(opt=>/*#__PURE__*/_jsx(\"option\",{value:opt,children:opt},opt))})})]},r.id)),rows.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{colSpan:4,style:{padding:16,textAlign:\"center\",color:\"#666\"},children:[\"No rows. Click \",/*#__PURE__*/_jsx(\"em\",{children:\"Add row\"}),\" to start.\"]})})]})]})})]});}function GridTable(_ref8){let{rows,types,onAdd,onRemove,onChange,onClear}=_ref8;return/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid #e5e7eb\",borderRadius:10,overflow:\"hidden\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,display:\"flex\",gap:8,alignItems:\"center\",background:\"#fafafa\"},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Uploaded / Editable Grid\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:\"auto\",display:\"flex\",gap:8},children:[/*#__PURE__*/_jsx(\"button\",{onClick:onAdd,style:btn(),children:\"Add row\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClear,style:btn(\"ghost\"),children:\"Clear\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{style:table(),children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:th(80),children:\"Room #\"}),/*#__PURE__*/_jsx(\"th\",{style:th(),children:\"Room Name\"}),/*#__PURE__*/_jsx(\"th\",{style:th(120),children:\"Area (m\\xB2)\"}),/*#__PURE__*/_jsx(\"th\",{style:th(200),children:\"Occupancy Type\"}),/*#__PURE__*/_jsx(\"th\",{style:th(80),children:\"Load\"}),/*#__PURE__*/_jsx(\"th\",{style:th(40)})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[rows.map(r=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:td(80),children:/*#__PURE__*/_jsx(\"input\",{value:r[\"Room #\"],onChange:e=>onChange(r.id,\"Room #\",e.target.value),style:input(70)})}),/*#__PURE__*/_jsx(\"td\",{style:td(),children:/*#__PURE__*/_jsx(\"input\",{value:r[\"Room Name\"],onChange:e=>onChange(r.id,\"Room Name\",e.target.value),style:input()})}),/*#__PURE__*/_jsx(\"td\",{style:td(120),children:/*#__PURE__*/_jsx(\"input\",{value:r[\"Area (m¬≤)\"],onChange:e=>onChange(r.id,\"Area (m¬≤)\",e.target.value),style:input(100),inputMode:\"decimal\",placeholder:\"0\"})}),/*#__PURE__*/_jsx(\"td\",{style:td(200),children:/*#__PURE__*/_jsx(\"select\",{value:r[\"Occupancy Type\"],onChange:e=>onChange(r.id,\"Occupancy Type\",e.target.value),style:select(180),children:types.map(opt=>/*#__PURE__*/_jsx(\"option\",{value:opt,children:opt},opt))})}),/*#__PURE__*/_jsx(\"td\",{style:td(80),children:/*#__PURE__*/_jsx(\"div\",{style:pill(),children:r[\"Occupant Load\"]})}),/*#__PURE__*/_jsx(\"td\",{style:td(40),children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>onRemove(r.id),style:btn(\"danger\"),children:\"\\xD7\"})})]},r.id)),rows.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{colSpan:6,style:{padding:16,textAlign:\"center\",color:\"#666\"},children:[\"Upload an Excel file or click \",/*#__PURE__*/_jsx(\"em\",{children:\"Add row\"}),\" to begin.\"]})})]})]})})]});}/* ===================== Tiny style helpers ===================== */function btn(){let variant=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"primary\";const base=variant===\"danger\"?{background:\"#ef4444\",color:\"#fff\",border:\"1px solid #dc2626\"}:variant===\"ghost\"?{background:\"#fff\",color:\"#111\",border:\"1px solid #e5e7eb\"}:{background:\"#2563eb\",color:\"#fff\",border:\"1px solid #1d4ed8\"};return _objectSpread(_objectSpread({},base),{},{borderRadius:8,padding:\"8px 12px\",fontSize:14,cursor:\"pointer\"});}const table=()=>({width:\"100%\",borderCollapse:\"separate\",borderSpacing:0});const th=w=>({textAlign:\"left\",background:\"#f8fafc\",padding:\"10px 12px\",borderBottom:\"1px solid #e5e7eb\",width:w,whiteSpace:\"nowrap\",fontWeight:700,fontSize:13});const td=w=>({padding:\"8px 12px\",borderBottom:\"1px solid #f1f5f9\",width:w,verticalAlign:\"middle\"});const input=w=>({width:w||\"100%\",padding:\"6px 8px\",borderRadius:8,border:\"1px solid #e5e7eb\",fontSize:14});const select=w=>({width:w||\"100%\",padding:\"6px 8px\",borderRadius:8,border:\"1px solid #e5e7eb\",fontSize:14,background:\"#fff\"});const pill=()=>({display:\"inline-block\",padding:\"4px 10px\",borderRadius:999,background:\"#111827\",color:\"#fff\",fontSize:13,lineHeight:1.4});","map":{"version":3,"names":["React","useEffect","useMemo","useState","XLSX","saveAs","jsPDF","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CODE_SETS","IBC_2024","label","factors","Retail","Restaurant","Administrative","Mechanical","IBC_2021","NFPA_101_2024","UK_ADB_2023","NCC_AU_2022","NBC_CA_2020","SBC_SA_2018","UAE_FireCode_2018","EU_Guidance","LS_KEY","normalizeType","t","available","val","toString","trim","includes","loadFrom","area","factorMap","type","_ref","_factorMap$type","a","Number","f","isFinite","Math","ceil","OccuCalcTools","mode","setMode","codeId","setCodeId","overrides","setOverrides","raw","localStorage","getItem","JSON","parse","_unused","setItem","stringify","_unused2","baseFactors","currentFactors","_objectSpread","typeList","Object","keys","manualRows","setManualRows","id","number","name","prev","map","r","gridRows","setGridRows","totals","grandTotal","rows","grouped","sum","forEach","l","handleModeChange","e","target","value","handleCodeChange","addManualRow","length","max","x","String","concat","removeManualRow","filter","changeManual","key","clearManual","handleUpload","_e$target$files","file","files","reader","FileReader","onload","evt","wb","read","result","ws","Sheets","SheetNames","utils","sheet_to_json","defval","row","i","_row$OccupancyType","_ref2","_row$AreaM","_ref3","_row$Room","_ref4","_row$RoomName","rawType","readAsBinaryString","changeGrid","next","addGridRow","removeGridRow","clearGrid","exportExcel","json_to_sheet","header","book_new","book_append_sheet","buf","write","bookType","Blob","exportPDFSummary","doc","unit","format","y","setFontSize","text","entries","_ref5","count","save","exportPDFDetailed","line","addPage","showEditor","setShowEditor","newTypeName","setNewTypeName","setFactorFor","v","resetCodeToDefaults","addNewType","deleteType","prototype","hasOwnProperty","call","curr","style","fontFamily","padding","maxWidth","margin","children","color","marginTop","display","gap","flexWrap","alignItems","border","borderRadius","onChange","marginLeft","minWidth","_ref6","cfg","onClick","s","btn","accept","title","justifyContent","overflowX","table","th","td","min","step","input","placeholder","gridTemplateColumns","ManualTable","types","onAdd","onRemove","onClear","GridTable","height","marginBottom","listStyle","_ref7","overflow","background","inputMode","select","opt","colSpan","textAlign","_ref8","pill","variant","arguments","undefined","base","fontSize","cursor","width","borderCollapse","borderSpacing","w","borderBottom","whiteSpace","fontWeight","verticalAlign","lineHeight"],"sources":["C:/Users/Personal/OneDrive/Desktop/Marina/pytho/website/occupant_calculator/occupancy-calculator/src/OccuCalcTools.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport * as XLSX from \"xlsx\";\r\nimport { saveAs } from \"file-saver\";\r\nimport jsPDF from \"jspdf\";\r\n\r\n/* =========================================================\r\n   CODE SETS (starter defaults, m¬≤ per person)\r\n   Note: Values here are generic starters ‚Äî verify per your jurisdiction.\r\n   You can edit per-code factors in the UI; edits persist in localStorage.\r\n   ========================================================= */\r\nconst CODE_SETS = {\r\n  IBC_2024: {\r\n    label: \"IBC 2024 (Table 1004.5)\",\r\n    factors: {\r\n      Retail: 2.8,\r\n      Restaurant: 1.4,\r\n      Administrative: 9.3,\r\n      Mechanical: 28,\r\n    },\r\n  },\r\n  IBC_2021: { label: \"IBC 2021\", factors: { Retail: 2.8, Restaurant: 1.4, Administrative: 9.3, Mechanical: 28 } },\r\n  NFPA_101_2024: { label: \"NFPA 101 (2024)\", factors: { Retail: 2.8, Restaurant: 1.4, Administrative: 9.3, Mechanical: 28 } },\r\n  UK_ADB_2023: { label: \"UK Approved Document B (2023)\", factors: { Retail: 2.8, Restaurant: 1.4, Administrative: 9.3, Mechanical: 28 } },\r\n  NCC_AU_2022: { label: \"Australia NCC (2022)\", factors: { Retail: 2.8, Restaurant: 1.4, Administrative: 9.3, Mechanical: 28 } },\r\n  NBC_CA_2020: { label: \"Canada NBC (2020)\", factors: { Retail: 2.8, Restaurant: 1.4, Administrative: 9.3, Mechanical: 28 } },\r\n  SBC_SA_2018: { label: \"Saudi SBC (2018+)\", factors: { Retail: 2.8, Restaurant: 1.4, Administrative: 9.3, Mechanical: 28 } },\r\n  UAE_FireCode_2018: { label: \"UAE Fire & Life Safety (2018+)\", factors: { Retail: 2.8, Restaurant: 1.4, Administrative: 9.3, Mechanical: 28 } },\r\n  EU_Guidance: { label: \"EU Guidance (generic)\", factors: { Retail: 2.8, Restaurant: 1.4, Administrative: 9.3, Mechanical: 28 } },\r\n};\r\n\r\n// localStorage helpers (persist your edited factors per code)\r\nconst LS_KEY = \"occuCalc.codeOverrides.v1\";\r\n\r\n// -------------------- Helpers --------------------\r\nconst normalizeType = (t, available) => {\r\n  const val = (t || \"\").toString().trim();\r\n  return available.includes(val) ? val : available[0] || \"Retail\";\r\n};\r\n\r\nconst loadFrom = (area, factorMap, type) => {\r\n  const a = Number(area);\r\n  const f = factorMap[type] ?? factorMap[\"Retail\"] ?? 1;\r\n  return Number.isFinite(a) && a > 0 ? Math.ceil(a / f) : 0;\r\n};\r\n\r\n// -------------------- Component --------------------\r\nexport default function OccuCalcTools() {\r\n  // Mode + Code selection\r\n  const [mode, setMode] = useState(\"manual\"); // \"manual\" | \"upload\"\r\n  const [codeId, setCodeId] = useState(\"IBC_2024\");\r\n\r\n  // Per-code custom overrides (persisted)\r\n  const [overrides, setOverrides] = useState({});\r\n  useEffect(() => {\r\n    try {\r\n      const raw = localStorage.getItem(LS_KEY);\r\n      if (raw) setOverrides(JSON.parse(raw));\r\n    } catch { }\r\n  }, []);\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem(LS_KEY, JSON.stringify(overrides));\r\n    } catch { }\r\n  }, [overrides]);\r\n\r\n  // Active factor map for current code (defaults + overrides)\r\n  const baseFactors = CODE_SETS[codeId].factors;\r\n  const currentFactors = useMemo(\r\n    () => ({ ...baseFactors, ...(overrides[codeId] || {}) }),\r\n    [baseFactors, overrides, codeId]\r\n  );\r\n  const typeList = useMemo(() => Object.keys(currentFactors), [currentFactors]);\r\n\r\n  // Manual rows (compact shape)\r\n  const [manualRows, setManualRows] = useState([\r\n    { id: 1, number: \"1\", name: \"Space 1\", area: \"\", type: typeList[0] || \"Retail\" },\r\n  ]);\r\n  useEffect(() => {\r\n    // when switching codes, align types that no longer exist\r\n    setManualRows((prev) =>\r\n      prev.map((r) => ({ ...r, type: normalizeType(r.type, typeList) }))\r\n    );\r\n  }, [typeList]);\r\n\r\n  // Upload/edit rows (header-style keys)\r\n  const [gridRows, setGridRows] = useState([]);\r\n  useEffect(() => {\r\n    // when switching codes, re-evaluate loads & types\r\n    setGridRows((prev) =>\r\n      prev.map((r) => {\r\n        const t = normalizeType(r[\"Occupancy Type\"], typeList);\r\n        return {\r\n          ...r,\r\n          \"Occupancy Type\": t,\r\n          \"Occupant Load\": loadFrom(r[\"Area (m¬≤)\"], currentFactors, t),\r\n        };\r\n      })\r\n    );\r\n  }, [currentFactors, typeList]);\r\n\r\n  // Totals (derived)\r\n  const { totals, grandTotal } = useMemo(() => {\r\n    const rows =\r\n      mode === \"manual\"\r\n        ? manualRows.map((r) => ({\r\n          \"Room #\": r.number,\r\n          \"Room Name\": r.name,\r\n          \"Area (m¬≤)\": r.area,\r\n          \"Occupancy Type\": r.type,\r\n          \"Occupant Load\": loadFrom(r.area, currentFactors, r.type),\r\n        }))\r\n        : gridRows;\r\n\r\n    const grouped = {};\r\n    let sum = 0;\r\n    rows.forEach((r) => {\r\n      const t = normalizeType(r[\"Occupancy Type\"], typeList);\r\n      const l = Number(r[\"Occupant Load\"]) || 0;\r\n      grouped[t] = (grouped[t] || 0) + l;\r\n      sum += l;\r\n    });\r\n    return { totals: grouped, grandTotal: sum };\r\n  }, [mode, manualRows, gridRows, currentFactors, typeList]);\r\n\r\n  // -------------------- Handlers --------------------\r\n  const handleModeChange = (e) => setMode(e.target.value);\r\n  const handleCodeChange = (e) => setCodeId(e.target.value);\r\n\r\n  // Manual CRUD\r\n  const addManualRow = () =>\r\n    setManualRows((prev) => {\r\n      const id = prev.length ? Math.max(...prev.map((x) => x.id)) + 1 : 1;\r\n      return [...prev, { id, number: String(id), name: `Space ${id}`, area: \"\", type: typeList[0] || \"Retail\" }];\r\n    });\r\n\r\n  const removeManualRow = (id) => setManualRows((prev) => prev.filter((r) => r.id !== id));\r\n  const changeManual = (id, key, val) =>\r\n    setManualRows((prev) =>\r\n      prev.map((r) =>\r\n        r.id === id\r\n          ? {\r\n            ...r,\r\n            [key]: key === \"type\" ? normalizeType(val, typeList) : val,\r\n          }\r\n          : r\r\n      )\r\n    );\r\n  const clearManual = () =>\r\n    setManualRows([{ id: 1, number: \"1\", name: \"Space 1\", area: \"\", type: typeList[0] || \"Retail\" }]);\r\n\r\n  // Upload\r\n  const handleUpload = (e) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (evt) => {\r\n      const wb = XLSX.read(evt.target.result, { type: \"binary\" });\r\n      const ws = wb.Sheets[wb.SheetNames[0]];\r\n      const rows = XLSX.utils.sheet_to_json(ws, { defval: \"\" }).map((row, i) => {\r\n        const rawType = row[\"Occupancy Type\"] ?? row[\"Type\"];\r\n        const type = normalizeType(rawType, typeList);\r\n        const area = row[\"Area (m¬≤)\"] ?? row[\"Area\"] ?? \"\";\r\n        return {\r\n          id: i + 1,\r\n          \"Room #\": String(row[\"Room #\"] ?? row[\"Room Number\"] ?? i + 1),\r\n          \"Room Name\": String(row[\"Room Name\"] ?? row[\"Name\"] ?? `Space ${i + 1}`),\r\n          \"Area (m¬≤)\": area,\r\n          \"Occupancy Type\": type,\r\n          \"Occupant Load\": loadFrom(area, currentFactors, type),\r\n        };\r\n      });\r\n      setGridRows(rows);\r\n    };\r\n    reader.readAsBinaryString(file);\r\n    e.target.value = null;\r\n  };\r\n\r\n  const changeGrid = (id, key, val) =>\r\n    setGridRows((prev) =>\r\n      prev.map((r) => {\r\n        if (r.id !== id) return r;\r\n        const next = { ...r, [key]: val };\r\n        const t = key === \"Occupancy Type\" ? normalizeType(val, typeList) : normalizeType(next[\"Occupancy Type\"], typeList);\r\n        next[\"Occupancy Type\"] = t;\r\n        next[\"Occupant Load\"] = loadFrom(next[\"Area (m¬≤)\"], currentFactors, t);\r\n        return next;\r\n      })\r\n    );\r\n  const addGridRow = () =>\r\n    setGridRows((prev) => {\r\n      const id = prev.length ? Math.max(...prev.map((x) => x.id)) + 1 : 1;\r\n      return [\r\n        ...prev,\r\n        { id, \"Room #\": String(id), \"Room Name\": `Space ${id}`, \"Area (m¬≤)\": \"\", \"Occupancy Type\": typeList[0] || \"Retail\", \"Occupant Load\": 0 },\r\n      ];\r\n    });\r\n  const removeGridRow = (id) => setGridRows((prev) => prev.filter((r) => r.id !== id));\r\n  const clearGrid = () => setGridRows([]);\r\n\r\n  // Exports\r\n  const exportExcel = () => {\r\n    const rows =\r\n      mode === \"manual\"\r\n        ? manualRows.map((r) => ({\r\n          \"Room #\": r.number,\r\n          \"Room Name\": r.name,\r\n          \"Area (m¬≤)\": r.area,\r\n          \"Occupancy Type\": r.type,\r\n          \"Occupant Load\": loadFrom(r.area, currentFactors, r.type),\r\n        }))\r\n        : gridRows;\r\n\r\n    const ws = XLSX.utils.json_to_sheet(rows, { header: [\"Room #\", \"Room Name\", \"Area (m¬≤)\", \"Occupancy Type\", \"Occupant Load\"] });\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Occupancy\");\r\n    const buf = XLSX.write(wb, { type: \"array\", bookType: \"xlsx\" });\r\n    saveAs(new Blob([buf], { type: \"application/octet-stream\" }), \"occupancy_data.xlsx\");\r\n  };\r\n\r\n  const exportPDFSummary = () => {\r\n    const doc = new jsPDF({ unit: \"pt\", format: \"a4\" });\r\n    let y = 64;\r\n    doc.setFontSize(18);\r\n    doc.text(`Occupancy Summary ‚Äì ${CODE_SETS[codeId].label}`, 40, y);\r\n    y += 24;\r\n\r\n    doc.setFontSize(12);\r\n    Object.entries(totals).forEach(([type, count]) => {\r\n      doc.text(`${type}: ${count} occupants`, 40, y);\r\n      y += 16;\r\n    });\r\n\r\n    y += 10;\r\n    doc.setFontSize(14);\r\n    doc.text(`Grand Total: ${grandTotal} occupants`, 40, y);\r\n    doc.save(\"occupancy_summary.pdf\");\r\n  };\r\n\r\n  const exportPDFDetailed = () => {\r\n    const rows =\r\n      mode === \"manual\"\r\n        ? manualRows.map((r) => ({\r\n          \"Room #\": r.number,\r\n          \"Room Name\": r.name,\r\n          \"Area (m¬≤)\": r.area,\r\n          \"Occupancy Type\": r.type,\r\n          \"Occupant Load\": loadFrom(r.area, currentFactors, r.type),\r\n        }))\r\n        : gridRows;\r\n\r\n    const doc = new jsPDF({ unit: \"pt\", format: \"a4\" });\r\n    let y = 64;\r\n    doc.setFontSize(18);\r\n    doc.text(`Occupancy Detailed Report ‚Äì ${CODE_SETS[codeId].label}`, 40, y);\r\n    y += 24;\r\n\r\n    doc.setFontSize(10);\r\n    doc.text(\"Room #\", 40, y);\r\n    doc.text(\"Room Name\", 110, y);\r\n    doc.text(\"Area (m¬≤)\", 280, y);\r\n    doc.text(\"Type\", 360, y);\r\n    doc.text(\"Load\", 460, y);\r\n    y += 12;\r\n    doc.line(40, y, 520, y);\r\n    y += 12;\r\n\r\n    rows.forEach((r) => {\r\n      if (y > 760) {\r\n        doc.addPage();\r\n        y = 64;\r\n      }\r\n      doc.text(String(r[\"Room #\"]), 40, y);\r\n      doc.text(String(r[\"Room Name\"]), 110, y);\r\n      doc.text(String(r[\"Area (m¬≤)\"]), 280, y);\r\n      doc.text(String(r[\"Occupancy Type\"]), 360, y);\r\n      doc.text(String(r[\"Occupant Load\"]), 460, y);\r\n      y += 14;\r\n    });\r\n\r\n    y += 12;\r\n    doc.setFontSize(12);\r\n    doc.text(`Grand Total: ${grandTotal} occupants`, 40, y);\r\n    doc.save(\"occupancy_detailed.pdf\");\r\n  };\r\n\r\n  // Factor editor UI state\r\n  const [showEditor, setShowEditor] = useState(false);\r\n  const [newTypeName, setNewTypeName] = useState(\"\");\r\n\r\n  const setFactorFor = (type, value) => {\r\n    const v = Number(value);\r\n    if (!Number.isFinite(v) || v <= 0) return;\r\n    setOverrides((prev) => ({\r\n      ...prev,\r\n      [codeId]: { ...(prev[codeId] || {}), [type]: v },\r\n    }));\r\n  };\r\n\r\n  const resetCodeToDefaults = () =>\r\n    setOverrides((prev) => {\r\n      const next = { ...prev };\r\n      delete next[codeId];\r\n      return next;\r\n    });\r\n\r\n  const addNewType = () => {\r\n    const name = newTypeName.trim();\r\n    if (!name || typeList.includes(name)) return;\r\n    setOverrides((prev) => ({\r\n      ...prev,\r\n      [codeId]: { ...(prev[codeId] || {}), [name]: 10 }, // default 10 m¬≤/person; user can change\r\n    }));\r\n    setNewTypeName(\"\");\r\n  };\r\n\r\n  const deleteType = (type) => {\r\n    // remove only if it's an override (not a base factor)\r\n    if (Object.prototype.hasOwnProperty.call(baseFactors, type)) return;\r\n    setOverrides((prev) => {\r\n      const curr = { ...(prev[codeId] || {}) };\r\n      delete curr[type];\r\n      return { ...prev, [codeId]: curr };\r\n    });\r\n  };\r\n\r\n  // -------------------- UI --------------------\r\n  return (\r\n    <div style={{ fontFamily: \"Arial, sans-serif\", padding: 24, maxWidth: 1200, margin: \"0 auto\" }}>\r\n      <h1 style={{ margin: 0 }}>üè¢ OccuCalc</h1>\r\n      <p style={{ color: \"#444\", marginTop: 6 }}>\r\n        Calculate occupant loads (m¬≤/person) using selectable code sets. You can edit per-code factors below.\r\n      </p>\r\n\r\n      {/* Controls */}\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          gap: 12,\r\n          flexWrap: \"wrap\",\r\n          alignItems: \"center\",\r\n          border: \"1px solid #e5e7eb\",\r\n          borderRadius: 10,\r\n          padding: 12,\r\n          marginTop: 12,\r\n        }}\r\n      >\r\n        <label><strong>Mode:</strong></label>\r\n        <select value={mode} onChange={handleModeChange} style={{ padding: \"6px 10px\", borderRadius: 8 }}>\r\n          <option value=\"manual\">Manual entry</option>\r\n          <option value=\"upload\">Upload Excel</option>\r\n        </select>\r\n\r\n        <label style={{ marginLeft: 8 }}><strong>Code:</strong></label>\r\n        <select value={codeId} onChange={handleCodeChange} style={{ padding: \"6px 10px\", borderRadius: 8, minWidth: 220 }}>\r\n          {Object.entries(CODE_SETS).map(([id, cfg]) => (\r\n            <option key={id} value={id}>{cfg.label}</option>\r\n          ))}\r\n        </select>\r\n\r\n        <button onClick={() => setShowEditor((s) => !s)} style={btn(\"ghost\")}>\r\n          {showEditor ? \"Hide factors\" : \"Edit factors\"}\r\n        </button>\r\n\r\n        {mode === \"upload\" && (\r\n          <>\r\n            <input type=\"file\" accept=\".xlsx,.xls\" onChange={handleUpload} title=\"Upload Excel\" />\r\n          </>\r\n        )}\r\n\r\n        <div style={{ marginLeft: \"auto\", display: \"flex\", gap: 8 }}>\r\n          <button onClick={exportExcel} style={btn()}>Export Excel</button>\r\n          <button onClick={exportPDFSummary} style={btn()}>PDF Summary</button>\r\n          <button onClick={exportPDFDetailed} style={btn()}>PDF Detailed</button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Factor editor */}\r\n      {showEditor && (\r\n        <div style={{ border: \"1px solid #e5e7eb\", borderRadius: 10, padding: 12, marginTop: 12 }}>\r\n          <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", gap: 8 }}>\r\n            <strong>Factors for: {CODE_SETS[codeId].label}</strong>\r\n            <button onClick={resetCodeToDefaults} style={btn(\"danger\")}>Reset to defaults</button>\r\n          </div>\r\n          <div style={{ overflowX: \"auto\", marginTop: 10 }}>\r\n            <table style={table()}>\r\n              <thead>\r\n                <tr>\r\n                  <th style={th(260)}>Occupancy Type</th>\r\n                  <th style={th(180)}>Factor (m¬≤/person)</th>\r\n                  <th style={th(120)}></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {typeList.map((t) => (\r\n                  <tr key={t}>\r\n                    <td style={td(260)}>{t}</td>\r\n                    <td style={td(180)}>\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"0.01\"\r\n                        step=\"0.01\"\r\n                        value={currentFactors[t]}\r\n                        onChange={(e) => setFactorFor(t, e.target.value)}\r\n                        style={input(160)}\r\n                      />\r\n                    </td>\r\n                    <td style={td(120)}>\r\n                      {!Object.prototype.hasOwnProperty.call(baseFactors, t) && (\r\n                        <button onClick={() => deleteType(t)} style={btn(\"danger\")}>Delete</button>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n                <tr>\r\n                  <td style={td(260)}>\r\n                    <input\r\n                      placeholder=\"Add new type (e.g., Assembly ‚Äì standing)\"\r\n                      value={newTypeName}\r\n                      onChange={(e) => setNewTypeName(e.target.value)}\r\n                      style={input(240)}\r\n                    />\r\n                  </td>\r\n                  <td style={td(180)}>\r\n                    <em style={{ color: \"#666\" }}>Default 10 m¬≤/person (editable after adding)</em>\r\n                  </td>\r\n                  <td style={td(120)}>\r\n                    <button onClick={addNewType} style={btn()}>Add type</button>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <p style={{ color: \"#888\", marginTop: 8 }}>\r\n            These are convenience defaults. Always verify factors against the official code text adopted in your project‚Äôs jurisdiction.\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 320px\", gap: 16, marginTop: 16 }}>\r\n        {/* Left: Tables */}\r\n        <div>\r\n          {mode === \"manual\" ? (\r\n            <ManualTable\r\n              rows={manualRows}\r\n              types={typeList}\r\n              onAdd={addManualRow}\r\n              onRemove={removeManualRow}\r\n              onChange={changeManual}\r\n              onClear={clearManual}\r\n            />\r\n          ) : (\r\n            <GridTable\r\n              rows={gridRows}\r\n              types={typeList}\r\n              onAdd={addGridRow}\r\n              onRemove={removeGridRow}\r\n              onChange={changeGrid}\r\n              onClear={clearGrid}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Right: Totals */}\r\n        <aside style={{ border: \"1px solid #e5e7eb\", borderRadius: 10, padding: 16, height: \"fit-content\" }}>\r\n          <h3 style={{ marginTop: 0 }}>Totals</h3>\r\n          <div style={{ marginBottom: 8, color: \"#666\" }}>Code: {CODE_SETS[codeId].label}</div>\r\n          <ul style={{ listStyle: \"none\", padding: 0, margin: 0 }}>\r\n            {typeList.map((t) => (\r\n              <li key={t} style={{ display: \"flex\", justifyContent: \"space-between\", padding: \"6px 0\" }}>\r\n                <span>{t}</span>\r\n                <strong>{totals[t] || 0}</strong>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n          <hr style={{ margin: \"12px 0\" }} />\r\n          <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n            <span>Grand Total</span>\r\n            <strong>{grandTotal}</strong>\r\n          </div>\r\n        </aside>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ===================== Sub-components ===================== */\r\nfunction ManualTable({ rows, types, onAdd, onRemove, onChange, onClear }) {\r\n  return (\r\n    <div style={{ border: \"1px solid #e5e7eb\", borderRadius: 10, overflow: \"hidden\" }}>\r\n      <div style={{ padding: 12, display: \"flex\", gap: 8, alignItems: \"center\", background: \"#fafafa\" }}>\r\n        <strong>Manual Entry</strong>\r\n        <div style={{ marginLeft: \"auto\", display: \"flex\", gap: 8 }}>\r\n          <button onClick={onAdd} style={btn()}>Add row</button>\r\n          <button onClick={onClear} style={btn(\"ghost\")}>Clear</button>\r\n        </div>\r\n      </div>\r\n      <div style={{ overflowX: \"auto\" }}>\r\n        <table style={table()}>\r\n          <thead>\r\n            <tr>\r\n              <th style={th(80)}>#</th>\r\n              <th style={th()}>Room Name</th>\r\n              <th style={th(120)}>Area (m¬≤)</th>\r\n              <th style={th(200)}>Occupancy Type</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {rows.map((r) => (\r\n              <tr key={r.id}>\r\n                <td style={td(80)}>\r\n                  <input value={r.number} onChange={(e) => onChange(r.id, \"number\", e.target.value)} style={input(70)} />\r\n                </td>\r\n                <td style={td()}>\r\n                  <input value={r.name} onChange={(e) => onChange(r.id, \"name\", e.target.value)} style={input()} />\r\n                </td>\r\n                <td style={td(120)}>\r\n                  <input\r\n                    value={r.area}\r\n                    onChange={(e) => onChange(r.id, \"area\", e.target.value)}\r\n                    style={input(100)}\r\n                    inputMode=\"decimal\"\r\n                    placeholder=\"0\"\r\n                  />\r\n                </td>\r\n                <td style={td(200)}>\r\n                  <select value={r.type} onChange={(e) => onChange(r.id, \"type\", e.target.value)} style={select(180)}>\r\n                    {types.map((opt) => (\r\n                      <option key={opt} value={opt}>{opt}</option>\r\n                    ))}\r\n                  </select>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            {rows.length === 0 && (\r\n              <tr>\r\n                <td colSpan={4} style={{ padding: 16, textAlign: \"center\", color: \"#666\" }}>\r\n                  No rows. Click <em>Add row</em> to start.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction GridTable({ rows, types, onAdd, onRemove, onChange, onClear }) {\r\n  return (\r\n    <div style={{ border: \"1px solid #e5e7eb\", borderRadius: 10, overflow: \"hidden\" }}>\r\n      <div style={{ padding: 12, display: \"flex\", gap: 8, alignItems: \"center\", background: \"#fafafa\" }}>\r\n        <strong>Uploaded / Editable Grid</strong>\r\n        <div style={{ marginLeft: \"auto\", display: \"flex\", gap: 8 }}>\r\n          <button onClick={onAdd} style={btn()}>Add row</button>\r\n          <button onClick={onClear} style={btn(\"ghost\")}>Clear</button>\r\n        </div>\r\n      </div>\r\n      <div style={{ overflowX: \"auto\" }}>\r\n        <table style={table()}>\r\n          <thead>\r\n            <tr>\r\n              <th style={th(80)}>Room #</th>\r\n              <th style={th()}>Room Name</th>\r\n              <th style={th(120)}>Area (m¬≤)</th>\r\n              <th style={th(200)}>Occupancy Type</th>\r\n              <th style={th(80)}>Load</th>\r\n              <th style={th(40)}></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {rows.map((r) => (\r\n              <tr key={r.id}>\r\n                <td style={td(80)}>\r\n                  <input value={r[\"Room #\"]} onChange={(e) => onChange(r.id, \"Room #\", e.target.value)} style={input(70)} />\r\n                </td>\r\n                <td style={td()}>\r\n                  <input value={r[\"Room Name\"]} onChange={(e) => onChange(r.id, \"Room Name\", e.target.value)} style={input()} />\r\n                </td>\r\n                <td style={td(120)}>\r\n                  <input\r\n                    value={r[\"Area (m¬≤)\"]}\r\n                    onChange={(e) => onChange(r.id, \"Area (m¬≤)\", e.target.value)}\r\n                    style={input(100)}\r\n                    inputMode=\"decimal\"\r\n                    placeholder=\"0\"\r\n                  />\r\n                </td>\r\n                <td style={td(200)}>\r\n                  <select\r\n                    value={r[\"Occupancy Type\"]}\r\n                    onChange={(e) => onChange(r.id, \"Occupancy Type\", e.target.value)}\r\n                    style={select(180)}\r\n                  >\r\n                    {types.map((opt) => (\r\n                      <option key={opt} value={opt}>{opt}</option>\r\n                    ))}\r\n                  </select>\r\n                </td>\r\n                <td style={td(80)}>\r\n                  <div style={pill()}>{r[\"Occupant Load\"]}</div>\r\n                </td>\r\n                <td style={td(40)}>\r\n                  <button onClick={() => onRemove(r.id)} style={btn(\"danger\")}>√ó</button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            {rows.length === 0 && (\r\n              <tr>\r\n                <td colSpan={6} style={{ padding: 16, textAlign: \"center\", color: \"#666\" }}>\r\n                  Upload an Excel file or click <em>Add row</em> to begin.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ===================== Tiny style helpers ===================== */\r\nfunction btn(variant = \"primary\") {\r\n  const base =\r\n    variant === \"danger\"\r\n      ? { background: \"#ef4444\", color: \"#fff\", border: \"1px solid #dc2626\" }\r\n      : variant === \"ghost\"\r\n        ? { background: \"#fff\", color: \"#111\", border: \"1px solid #e5e7eb\" }\r\n        : { background: \"#2563eb\", color: \"#fff\", border: \"1px solid #1d4ed8\" };\r\n  return { ...base, borderRadius: 8, padding: \"8px 12px\", fontSize: 14, cursor: \"pointer\" };\r\n}\r\nconst table = () => ({ width: \"100%\", borderCollapse: \"separate\", borderSpacing: 0 });\r\nconst th = (w) => ({ textAlign: \"left\", background: \"#f8fafc\", padding: \"10px 12px\", borderBottom: \"1px solid #e5e7eb\", width: w, whiteSpace: \"nowrap\", fontWeight: 700, fontSize: 13 });\r\nconst td = (w) => ({ padding: \"8px 12px\", borderBottom: \"1px solid #f1f5f9\", width: w, verticalAlign: \"middle\" });\r\nconst input = (w) => ({ width: w || \"100%\", padding: \"6px 8px\", borderRadius: 8, border: \"1px solid #e5e7eb\", fontSize: 14 });\r\nconst select = (w) => ({ width: w || \"100%\", padding: \"6px 8px\", borderRadius: 8, border: \"1px solid #e5e7eb\", fontSize: 14, background: \"#fff\" });\r\nconst pill = () => ({ display: \"inline-block\", padding: \"4px 10px\", borderRadius: 999, background: \"#111827\", color: \"#fff\", fontSize: 13, lineHeight: 1.4 });\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}